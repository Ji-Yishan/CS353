<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.parttime.cs353.dao.UserPasswordMapper">

    <insert id="addUser" parameterType="com.parttime.cs353.pojo.dto.UserLoginDTO">
        insert into user (phone, password, `type`)
            values (#{phone},#{password},#{type});
    </insert>

    <select id="selectUserByPhone" parameterType="string" resultType="com.parttime.cs353.pojo.data.UserDO">
        select * from user where phone=#{phone};
    </select>
    <select id="selectUserDetail" parameterType="int" resultType="com.parttime.cs353.pojo.bean.UserDetailBean">
        select uid,`name`,`status`,gender,birthday,advantage,desireIndustry,desireTag,
               desiredWorktime,salaryRequirement from user where uid=#{uid};
    </select>

    <update id="updateUserDetail" parameterType="com.parttime.cs353.pojo.business.UserDetailBO">

        update user
        <set>
            <if test="status != null">
                `status` = #{status},
            </if>
            <if test="name != null">
                `name` = #{name},
            </if>
            <if test="gender != null">
                `gender` = #{gender},
            </if>
            <if test="birthday != null">
                `birthday` = #{birthday},
            </if>
        </set>

        <where >
            uid=#{uid};
        </where>

    </update>

    <update id="updateUserAdvantage" parameterType="map">
        update user
        <set>
            <if test="advantage != null">
                `advantage` = #{advantage},
            </if>
        </set>

        <where >
            uid=#{uid};
        </where>
    </update>

    <update id="updateExpectation" parameterType="com.parttime.cs353.pojo.business.UserExpectationBO">

        update user
        <set>
            <if test="desireIndustry != null">
                `desireIndustry` = #{desireIndustry},
            </if>
            <if test="desireTag != null">
                `desireTag` = #{desireTag},
            </if>
            <if test="desiredWorktime != null">
                `desiredWorktime` = #{desiredWorktime},
            </if>
            <if test="salaryRequirement != null">
                `salaryRequirement` = #{salaryRequirement},
            </if>
        </set>

        <where >
            uid=#{uid};
        </where>

    </update>

</mapper>